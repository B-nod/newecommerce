
{% extends 'layout.html '%}

{% block title %}
<title>E-commerce - Esewa payment</title>
{% endblock %}

{% block main_content %}
<div class="container">
    <div class="row">
        <div class="col-md-6 offset-md-3">
            <h1 class="text-center">You are being redirect to Esewa. Please wait ....</h1>
            <div class="card p-2" style="display: none;">
                <form action="https://rc-epay.esewa.com.np/api/epay/main/v2/form" method="POST" id="esewa_form">
                    <input type="hidden" id="amount" name="amount" value="{{order.total_price}}" required>
                    <input type="hidden" id="tax_amount" name="tax_amount" value ="10" required>
                    <input type="hidden" id="total_amount" name="total_amount" value="{{order.total_price}}" required>
                    <input type="hidden" id="transaction_uuid" name="transaction_uuid" required>
                    <input type="hidden" id="product_code" name="product_code" value ="EPAYTEST" required>
                    <input type="hidden" id="product_service_charge" name="product_service_charge" value="0" required>
                    <input type="hidden" id="product_delivery_charge" name="product_delivery_charge" value="0" required>
                    <input type="hidden" id="success_url" name="success_url" value="https://esewa.com.np" required>
                    <input type="hidden" id="failure_url" name="failure_url" value="https://google.com" required>
                    <input type="hidden" id="signed_field_names" name="signed_field_names" value="total_amount,transaction_uuid,product_code" required>
                    <input type="hidden" id="signature" name="signature" required>
                    <input value="Submit" type="submit">
                    </form>
            </div>
        </div>
    </div>
</div>
<script>
    setTimeout(function(){
        document.getElementById('esewa_form').submit()
    }, 1000)
</script>
{% endblock %}